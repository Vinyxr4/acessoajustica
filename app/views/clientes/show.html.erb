<%- model_class = Cliente -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<div class="container-fluid">

  <div class="row">
    <div class="col-md-2"></div>
    <div class = "col-md-8">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Dados Pessoais</h3>
        </div>
        <div class="panel-body">
          <ul class="list-group">
            <li class="list-group-item">
              <strong>Nome:</strong>
              <%= @cliente.nome %>
            </li>
            <li class="list-group-item">
              <strong>Nome da Mãe:</strong>
              <%= @cliente.nome_da_mae %>
            </li>
            <li class="list-group-item">
              <strong>CPF:</strong>
              <%= @cliente.cpf %>
            </li>
            <li class="list-group-item">
              <strong>RG:</strong>
              <%= @cliente.rg %>
            </li>
            <li class="list-group-item">
              <strong>Cor:</strong>
              <%= @cliente.cor %>
            </li>
            <li class="list-group-item">
              <strong>Identidade de Gênero:</strong>
              <%= @cliente.identidade_de_genero %>
            </li>
          </ul>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Dados Familiares</h3>
        </div>
        <div class="panel-body">
          <ul class="list-group">
            <li class="list-group-item">
              <strong>Renda Familiar:</strong>
              <%= @cliente.familia_renda %>
            </li>
            <li class="list-group-item">
              <strong>Qtd. Total de Pessoas:</strong>
              <%= @cliente.familia_quantidade %>
            </li>
            <li class="list-group-item">
              <strong>Qtd. de Filhos:</strong>
              <%= @cliente.filhos_quantidade %>
            </li>
            <li class="list-group-item">
              <strong>Qtd. de Contribuintes:</strong>
              <%= @cliente.contribuintes_quantidade %>
            </li>
          </ul>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Dados Profissionais</h3>
        </div>
        <div class="panel-body">
          <ul class="list-group">
            <li class="list-group-item">
              <strong>Profissão:</strong>
              <%= @cliente.profissao_nome %>
            </li>
            <li class="list-group-item">
              <strong>Categoria:</strong>
              <%= @cliente.profissao_type_description %>
            </li>
          </ul>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Atendimentos</h3>
        </div>
        <div class="panel-body">
          <ul class="list-group">
            <li class="list-group-item">
              <% @cliente.atendimentos.each_with_index do |atendimento, index| %>
                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                  <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="heading<%= index %>">
                      <h4 class="panel-title">
                        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse<%= index %>" aria-expanded="true" aria-controls="collapse<%= index %>">
                          <%= index+1%> Atendimento
                          <%= link_to "Ver detalhes", atendimento_path(atendimento), :class => 'btn btn-default btn-xs pull-right'%>
                        </a>
                      </h4>
                    </div>
                    <div id="collapse<%= index %>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading<%= index %>">
                      <div class="panel-body">
                        <% atendimento.relatos.each do |relato| %>
                          <%= relato.description %>
                          <hr>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>
              <% end %>
              <%= link_to 'Novo atendimento', new_atendimento_path(cliente_id: @cliente.id), class: 'btn btn-md btn-info' %>
            </li>
          </ul>
        </div>
      </div>
      <%= link_to t('.back', :default => t("helpers.links.back")),
                    clientes_path, :class => 'btn btn-default'  %>
      <%= link_to t('.edit', :default => t("helpers.links.edit")),
                    edit_cliente_path(@cliente), :class => 'btn btn-primary' %>
      <hr>
    </div><!-- /col-md-8 -->
  </div><!-- /row -->
</div><!-- /container-fluid -->
